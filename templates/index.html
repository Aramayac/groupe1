{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Gestion des utilisateurs</h2>

<!-- Bouton pour ouvrir le modal -->
<button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addUserModal">
  ➕ Ajouter un utilisateur
</button>

<!-- Liste des utilisateurs -->
<div class="card card-body mt-3">
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>ID</th><th>Nom</th><th>Prénom</th><th>Âge</th><th>Nationalité</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users.items %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.nom }}</td>
        <td>{{ user.prenom }}</td>
        <td>{{ user.age }}</td>
        <td>{{ user.nationalite }}</td>
        <td>
          <a href="{{ url_for('update_user', id=user.id) }}" class="btn btn-sm btn-warning">Modifier</a>
          <a href="{{ url_for('delete_user', id=user.id) }}" class="btn btn-sm btn-danger">Supprimer</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination -->
  <nav>
    <ul class="pagination">
      {% if users.has_prev %}
        <li class="page-item"><a class="page-link" href="{{ url_for('home', page=users.prev_num) }}">Précédent</a></li>
      {% endif %}
      {% for page_num in users.iter_pages() %}
        {% if page_num %}
          <li class="page-item {% if page_num == users.page %}active{% endif %}">
            <a class="page-link" href="{{ url_for('home', page=page_num) }}">{{ page_num }}</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">…</span></li>
        {% endif %}
      {% endfor %}
      {% if users.has_next %}
        <li class="page-item"><a class="page-link" href="{{ url_for('home', page=users.next_num) }}">Suivant</a></li>
      {% endif %}
    </ul>
  </nav>
</div>

<!-- Modal Bootstrap -->
<div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{{ url_for('add_user') }}">
        <div class="modal-header">
          <h5 class="modal-title" id="addUserModalLabel">Ajouter un utilisateur</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <input type="text" name="nom" class="form-control" placeholder="Nom" required>
          </div>
          <div class="mb-3">
            <input type="text" name="prenom" class="form-control" placeholder="Prénom" required>
          </div>
          <div class="mb-3">
            <input type="number" name="age" class="form-control" placeholder="Âge" required>
          </div>
          <div class="mb-3">
            <input type="text" name="nationalite" class="form-control" placeholder="Nationalité" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
          <button type="submit" class="btn btn-success">Enregistrer</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
